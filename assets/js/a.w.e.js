/*! Built & Coded 2014 with Confidence by Marcus Pohorely. Follow @der_poho */
/*! Designed by Joris Rigerl - Follow @jrigerl */
/*! Have fun reading and tell us what you think. (Built on 2014-10-01) */
var AndyWolf={init:function(){this.models=models,Detectizr.detect(),"desktop"==Detectizr.device.type&&(this.initWaypoints(),this.initParallax()),"tablet"==Detectizr.device.type,"mobile"==Detectizr.device.type,$("#closer").height($(window).height()),this.initRouter()},initRouter:function(){this.router=new Simrou;var a=this.router.addRoute("/"),b=this.router.addRoute("/model/:category/:slug");a.get(function(){}),b.get(function(a,b){$("#glass-details-framer").hasClass("open")?AndyWolf.switchModel(b.slug):AndyWolf.openGlass("the-model-"+b.slug)}),this.router.start("/",!0,!1)},initWaypoints:function(){$(".logo-color-blend").waypoint(function(a){$("#awe-logo").removeClass().addClass("up"==a?"brown":"white")},{offset:70})},initParallax:function(){$(".has-image").imageScroll({container:$("body")})},initDetailsPersonHover:function(){"desktop"==Detectizr.device.type&&($("#glass-details-photo-person").hover(function(){$(this).addClass("hover")},function(){$(this).removeClass("hover")}),$("#global-model-navigation").hover(function(){$("#glass-details-photo-person").addClass("hover")})),("tablet"==Detectizr.device.type||"mobile"==Detectizr.device.type)&&$("#quote-trigger").on("click",function(){$("#glass-details-photo-person").toggleClass("hover"),$(this).toggleClass("active")})},loadTemplate:function(a,b){var c=$("#"+a).html();return Handlebars.compile(c)({model:b})},openGlass:function(a){$("#glass-details-framer").removeClass("right").addClass("left"),$("#glass-details-background-white").attr("data-direction","left"),ga("send","event","button","click","glass",a);var b=this;$glass_obj=$('a.glass[data-glass="'+a+'"]');var c=$glass_obj.offset(),d=$glass_obj.width(),e=$glass_obj.height(),f=$(window).scrollTop(),g=$(window).height(),h=($(window).width(),$glass_obj.clone());h.addClass("cloned").css({top:c.top+"px",left:c.left+"px",width:d+"px",height:e+"px"}).appendTo("body").addClass("animated").removeAttr("onclick"),setTimeout(function(){h.css({left:"50%","margin-left":"-"+d/2+"px",top:f+g/2+"px","margin-top":"-"+e/2+"px"})},200),this.loadModel(a.replace("the-model-","")),$("#glass-details-framer").addClass("open").scrollTop(0),setTimeout(function(){h.addClass("fadeout"),$("#glass-details-background-white").addClass("left-skew"),b.initGlassDetails(),setTimeout(function(){h.remove(),$("body").addClass("no-scroll")},500)},2e3)},closeGlass:function(){window.location.hash="/",$("body").removeClass("no-scroll"),$mover=$("#glass-details-background-white");var a=$mover.attr("data-direction");"left"==a&&$mover.removeClass("left-skew"),"right"==a&&$mover.removeClass("right-skew"),this.closeGlassDetails(),setTimeout(function(){$("#glass-details-framer").removeClass("open"),setTimeout(function(){$("#glass-details-framer").blur(),$("#glass-details-background-white").removeClass().addClass("animated"),$("#glass-details-photo-person, #glass-details-top-bar, #glass-details-details-column, #global-model-navigation, #quote-trigger").remove()},500)},1e3),$(".cloned").remove()},loadModel:function(a){$("#glass-details-photo-person, #glass-details-top-bar, #glass-details-details-column, #global-model-navigation, #quote-trigger").remove();var b=_.findWhere(this.models,{slug:a});b.color_alternatives=_.where(this.models,{model:b.model,type:"alt"});var c=this.loadTemplate("tpl-awe-photo",b);$("#glass-details-background-brown").after(c);var d=this.loadTemplate("tpl-awe-detail",b);$("#glass-details-background-white").after(d)},nextModel:function(a){var b=_.where(this.models,{type:"main"}),c=_.pluck(b,"model").indexOf(a);if(c+1<b.length)var d=b[c+1];else var d=b[0];ga("send","event","button","click","glass",d.slug),this.router.navigate("/model/"+d.category+"/"+d.slug)},prevModel:function(a){var b=_.where(this.models,{type:"main"}),c=_.pluck(b,"model").indexOf(a);if(c-1>0)var d=b[c-1];else var d=b[b.length-1];ga("send","event","button","click","glass",d.slug),this.router.navigate("/model/"+d.category+"/"+d.slug)},switchModel:function(a){var b=this;this.closeGlassDetails(),setTimeout(function(){b.loadModel(a),$mover=$("#glass-details-background-white");var c=c?c:$mover.attr("data-direction");c||(c="left"),"left"==c&&($mover.addClass("left-out").removeClass("left-skew"),setTimeout(function(){$mover.removeClass("animated left-out").addClass("right-out"),setTimeout(function(){$mover.addClass("animated right-skew").removeClass("right-out")},100)},500),$mover.attr("data-direction","right"),$("#glass-details-framer").addClass("right")),"right"==c&&($mover.addClass("right-out").removeClass("right-skew"),setTimeout(function(){$mover.removeClass("animated right-out").addClass("left-out"),setTimeout(function(){$mover.addClass("animated left-skew").removeClass("left-out")},100)},500),$mover.attr("data-direction","left"),$("#glass-details-framer").removeClass("right")),setTimeout(function(){b.initGlassDetails(c)},1e3)},1e3)},initGlassDetails:function(){$("#glass-details-framer .intro-anim").addClass("trigger-intro");{var a=$("#model-colors-slides"),b=a.parent();b.width()}a.find("li").width(b.width()/3),a.sly({horizontal:1,itemNav:"basic",smart:1,activateOn:"click",mouseDragging:1,touchDragging:1,releaseSwing:1,speed:300,elasticBounds:1,easing:"swing",dragHandle:1,dynamicHandle:1,clickBar:1,forward:b.find(".forward"),backward:b.find(".backward"),prev:b.find(".prev"),next:b.find(".next"),prevPage:b.find(".prevPage"),nextPage:b.find(".nextPage")},{active:function(b,c){var d=$("#glass-details-details-column").attr("data-model"),e=$(a.find("li").get(c)).attr("data-model");if(d!=e){var f=_.findWhere(AndyWolf.models,{slug:e});$("#gd-model-no").html(f.model+" "+f.color),$("#gd-model-preview-glass img").attr("src","assets/photos/side/dist/"+f.slug+".jpg"),$("#gd-model-preview-size").html("Size "+f.sizes),$("#glass-details-details-column").attr("data-model",f.slug)}}}).init(),this.initDetailsPersonHover()},slideRight:function(){$("#model-colors-slides").sly("next")},slideLeft:function(){$("#model-colors-slides").sly("prev")},closeGlassDetails:function(){$("#glass-details-framer .intro-anim").removeClass("trigger-intro")},isFullscreen:function(){if(void 0!==window.fullScreen)return window.fullScreen;var a=5;return $.browser.webkit&&/Apple Computer/.test(navigator.vendor)&&(a=42),screen.width==window.innerWidth&&Math.abs(screen.height-window.innerHeight)<a}};$(document).ready(function(){outdatedBrowser({bgColor:"#f25648",color:"#ffffff",lowerThan:"transform",languagePath:"outdated-en.html"}),AndyWolf.init()});